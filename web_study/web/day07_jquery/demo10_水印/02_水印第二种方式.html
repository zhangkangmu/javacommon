<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

</head>
<script type="text/javascript" src="../js/jquery-3.3.1.min.js"></script>
<script src="common.js"></script>
<script>
    var interval;
    function watermark(t1,t2) {
        // var mark_divs = document.getElementsByClassName('mark_div');
        var mark_divs = $(".mark_div");
        if(mark_divs.length > 0){
            for(var i = mark_divs.length - 1; i >= 0; i--){
                document.body.removeChild(mark_divs[i])
            }
        }
        //获取页面的全部宽高
        // var maxWidth = document.documentElement.clientWidth;
        // var maxHeight = document.documentElement.clientHeight;
        var maxWidth = document.documentElement.scrollWidth;
        var maxHeight = document.documentElement.scrollHeight;
        var intervalWidth = 250;    //间隔宽度
        var intervalheight = 200;   //间隔高度
        var rowNumber = (maxWidth - 40 -200) / intervalWidth;    //横向个数
        var coumnNumber = (maxHeight - 40-80) / intervalheight+1;   //纵向个数

        //默认设置
        var defaultSettings = {
            // watermark_color: '#aaa', //水印字体颜色
            watermark_color: '#FF0000', //水印字体颜色
            watermark_alpha: 0.4, //水印透明度
            watermark_fontsize: '14px', //水印字体大小
            watermark_font: '微软雅黑', //水印字体
            watermark_width: 200, //水印宽度
            watermark_height: 80, //水印长度
            watermark_angle: 15 //水印倾斜度数
        };
        var _temp = document.createDocumentFragment();
        var flag=false;
        for(var i = 0; i < rowNumber; i++){
            for(var j = 0; j < coumnNumber; j++){
                var x = intervalWidth*i + 20;
                var y = intervalheight*j + 30;
                var mark_div = document.createElement('div');
                mark_div.id = 'mark_div' + i + j;
                mark_div.className = 'mark_div';
                ///三个节点
                var span0 = document.createElement('div');
                span0.appendChild(document.createTextNode(t1));
                var span1 = document.createElement('div');
                span1.appendChild(document.createTextNode(t2));
                mark_div.appendChild(span0);
                mark_div.appendChild(span1);
                //设置水印div倾斜显示
                // if (flag) {
                //     mark_div.style.marginLeft='100px';
                // }
                mark_div.style.webkitTransform = "rotate(-" + defaultSettings.watermark_angle + "deg)";
                mark_div.style.MozTransform = "rotate(-" + defaultSettings.watermark_angle + "deg)";
                mark_div.style.msTransform = "rotate(-" + defaultSettings.watermark_angle + "deg)";
                mark_div.style.OTransform = "rotate(-" + defaultSettings.watermark_angle + "deg)";
                mark_div.style.transform = "rotate(-" + defaultSettings.watermark_angle + "deg)";
                mark_div.style.visibility = "";
                mark_div.style.position = "absolute";
                mark_div.style.left = x + 'px';
                mark_div.style.top = y + 'px';
                mark_div.style.overflow = "hidden"; //内容会被修剪，元素框外面的内容不会被显示，浏览器不会显示滚动条。
                mark_div.style.zIndex = "9999";  //属性设置或返回定位元素的堆叠顺序。拥有更高堆叠顺序（1）的元素总是会处于较低堆叠顺序（0）的元素的前面。
                mark_div.style.pointerEvents = 'none'; //pointer-events:none  让水印不阻止交互事件
                mark_div.style.opacity = defaultSettings.watermark_alpha;
                mark_div.style.fontSize = defaultSettings.watermark_fontsize;
                mark_div.style.fontFamily = defaultSettings.watermark_font;
                mark_div.style.color = defaultSettings.watermark_color;
                mark_div.style.textAlign = "center";
                mark_div.style.width = defaultSettings.watermark_width + 'px';
                mark_div.style.height = defaultSettings.watermark_height + 'px';
                mark_div.style.display = "block";
                _temp.appendChild(mark_div);
                flag=!flag;
            }
        }
        document.body.appendChild(_temp);
    }

    function start(){
        if (typeof (interval) != "undefined") {
            clearInterval(interval);
        }
         interval = window.setInterval("watermark('zyh',displayTime())",1000);//单位是毫秒
    }
    function test() {
        alert("测试点击");
    }
</script>

<body onload="start()">
<!--<body >-->
<!--<div class="mark_div"></div>-->
<!--<div class="mark_div" style="margin: 20px"></div>-->
<!--<div style="width: 100%;height: 1500px; ">-->
<!--<input style="width: 100%;height: 200px;background: #2aabd2;" type="button" onclick="test()" value="点击开始水印">-->
<!--</div>-->

</body>
</html>